var qq=function(e){return{hide:function(){return e.style.display="none",this},attach:function(t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n),function(){qq(e).detach(t,n)}},detach:function(t,n){return e.removeEventListener?e.removeEventListener(t,n,!1):e.attachEvent&&e.detachEvent("on"+t,n),this},contains:function(t){return e===t?!0:e.contains?e.contains(t):!!(8&t.compareDocumentPosition(e))},insertBefore:function(t){return t.parentNode.insertBefore(e,t),this},remove:function(){return e.parentNode.removeChild(e),this},css:function(t){return null!==t.opacity&&"string"!=typeof e.style.opacity&&"undefined"!=typeof e.filters&&(t.filter="alpha(opacity="+Math.round(100*t.opacity)+")"),qq.extend(e.style,t),this},hasClass:function(t){return RegExp("(^| )"+t+"( |$)").test(e.className)},addClass:function(t){return qq(e).hasClass(t)||(e.className+=" "+t),this},removeClass:function(t){return e.className=e.className.replace(RegExp("(^| )"+t+"( |$)")," ").replace(/^\s+|\s+$/g,""),this},getByClass:function(t){var n,o=[];return e.querySelectorAll?e.querySelectorAll("."+t):(n=e.getElementsByTagName("*"),qq.each(n,function(e,n){qq(n).hasClass(t)&&o.push(n)}),o)},children:function(){for(var t=[],n=e.firstChild;n;)1===n.nodeType&&t.push(n),n=n.nextSibling;return t},setText:function(t){return e.innerText=t,e.textContent=t,this},clearText:function(){return qq(e).setText("")}}};qq.log=function(e,t){window.console&&(t&&"info"!==t?window.console[t]?window.console[t](e):window.console.log("<"+t+"> "+e):window.console.log(e))},qq.isObject=function(e){return null!==e&&e&&"object"==typeof e&&e.constructor===Object},qq.isFunction=function(e){return"function"==typeof e},qq.isFileOrInput=function(e){if(window.File&&e instanceof File)return!0;if(window.HTMLInputElement){if(e instanceof HTMLInputElement&&e.type&&"file"===e.type.toLowerCase())return!0}else if(e.tagName&&"input"===e.tagName.toLowerCase()&&e.type&&"file"===e.type.toLowerCase())return!0;return!1},qq.isXhrUploadSupported=function(){var e=document.createElement("input");return e.type="file",void 0!==e.multiple&&"undefined"!=typeof File&&"undefined"!=typeof FormData&&"undefined"!=typeof(new XMLHttpRequest).upload},qq.isFolderDropSupported=function(e){return e.items&&e.items[0].webkitGetAsEntry},qq.isFileChunkingSupported=function(){return!qq.android()&&qq.isXhrUploadSupported()&&(File.prototype.slice||File.prototype.webkitSlice||File.prototype.mozSlice)},qq.extend=function(e,t,n){qq.each(t,function(t,o){n&&qq.isObject(o)?(void 0===e[t]&&(e[t]={}),qq.extend(e[t],o,!0)):e[t]=o})},qq.indexOf=function(e,t,n){if(e.indexOf)return e.indexOf(t,n);var n=n||0,o=e.length;for(0>n&&(n+=o);o>n;n+=1)if(e.hasOwnProperty(n)&&e[n]===t)return n;return-1},qq.getUniqueId=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})},qq.ie=function(){return-1!==navigator.userAgent.indexOf("MSIE")},qq.ie10=function(){return-1!==navigator.userAgent.indexOf("MSIE 10")},qq.safari=function(){return void 0!==navigator.vendor&&-1!==navigator.vendor.indexOf("Apple")},qq.chrome=function(){return void 0!==navigator.vendor&&-1!==navigator.vendor.indexOf("Google")},qq.firefox=function(){return-1!==navigator.userAgent.indexOf("Mozilla")&&void 0!==navigator.vendor&&""===navigator.vendor},qq.windows=function(){return"Win32"===navigator.platform},qq.android=function(){return-1!==navigator.userAgent.toLowerCase().indexOf("android")},qq.preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},qq.toElement=function(){var e=document.createElement("div");return function(t){return e.innerHTML=t,t=e.firstChild,e.removeChild(t),t}}(),qq.each=function(e,t){var n,o;if(e)for(n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&(o=t(n,e[n]),!1===o))break},qq.obj2url=function(e,t,n){var o,i=[],s="&",r=function(e,n){var o=t?/\[\]$/.test(t)?t:t+"["+n+"]":n;"undefined"!==o&&"undefined"!==n&&i.push("object"==typeof e?qq.obj2url(e,o,!0):"[object Function]"===Object.prototype.toString.call(e)?encodeURIComponent(o)+"="+encodeURIComponent(e()):encodeURIComponent(o)+"="+encodeURIComponent(e))};if(!n&&t)s=/\?/.test(t)?/\?$/.test(t)?"":"&":"?",i.push(t),i.push(qq.obj2url(e));else if("[object Array]"===Object.prototype.toString.call(e)&&"undefined"!=typeof e)for(o=-1,n=e.length;n>o;o+=1)r(e[o],o);else if("undefined"!=typeof e&&null!==e&&"object"==typeof e)for(o in e)e.hasOwnProperty(o)&&r(e[o],o);else i.push(encodeURIComponent(t)+"="+encodeURIComponent(e));return t?i.join(s):i.join(s).replace(/^&/,"").replace(/%20/g,"+")},qq.obj2FormData=function(e,t,n){return t||(t=new FormData),qq.each(e,function(e,o){e=n?n+"["+e+"]":e,qq.isObject(o)?qq.obj2FormData(o,t,e):qq.isFunction(o)?t.append(encodeURIComponent(e),encodeURIComponent(o())):t.append(encodeURIComponent(e),encodeURIComponent(o))}),t},qq.obj2Inputs=function(e,t){var n;return t||(t=document.createElement("form")),qq.obj2FormData(e,{append:function(e,o){n=document.createElement("input"),n.setAttribute("name",e),n.setAttribute("value",o),t.appendChild(n)}}),t},qq.setCookie=function(e,t,n){var o=new Date,i="";n&&(o.setTime(o.getTime()+864e5*n),i="; expires="+o.toGMTString()),document.cookie=e+"="+t+i+"; path=/"},qq.getCookie=function(e){for(var t,e=e+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){for(t=n[o];" "==t.charAt(0);)t=t.substring(1,t.length);if(0===t.indexOf(e))return t.substring(e.length,t.length)}},qq.getCookieNames=function(e){var t=document.cookie.split(";"),n=[];return qq.each(t,function(t,o){var o=o.trim(),i=o.indexOf("=");o.match(e)&&n.push(o.substr(0,i))}),n},qq.deleteCookie=function(e){qq.setCookie(e,"",-1)},qq.areCookiesEnabled=function(){var e="qqCookieTest:"+1e5*Math.random();return qq.setCookie(e,1),qq.getCookie(e)?(qq.deleteCookie(e),!0):!1},qq.parseJson=function(a){return"function"==typeof JSON.parse?JSON.parse(a):eval("("+a+")")},qq.DisposeSupport=function(){var e=[];return{dispose:function(){var t;do(t=e.shift())&&t();while(t)},attach:function(){this.addDisposer(qq(arguments[0]).attach.apply(this,Array.prototype.slice.call(arguments,1)))},addDisposer:function(t){e.push(t)}}},qq.UploadButton=function(e){this._options={element:null,multiple:!1,acceptFiles:null,name:"file",onChange:function(){},hoverClass:"qq-upload-button-hover",focusClass:"qq-upload-button-focus"},qq.extend(this._options,e),this._disposeSupport=new qq.DisposeSupport,this._element=this._options.element,qq(this._element).css({position:"relative",overflow:"hidden",direction:"ltr"}),this._input=this._createInput()},qq.UploadButton.prototype={getInput:function(){return this._input},reset:function(){this._input.parentNode&&qq(this._input).remove(),qq(this._element).removeClass(this._options.focusClass),this._input=this._createInput()},_createInput:function(){var e=document.createElement("input");this._options.multiple&&e.setAttribute("multiple","multiple"),this._options.acceptFiles&&e.setAttribute("accept",this._options.acceptFiles),e.setAttribute("type","file"),e.setAttribute("name",this._options.name),qq(e).css({position:"absolute",right:0,top:0,fontFamily:"Arial",fontSize:"118px",margin:0,padding:0,cursor:"pointer",opacity:0}),this._element.appendChild(e);var t=this;return this._disposeSupport.attach(e,"change",function(){t._options.onChange(e)}),this._disposeSupport.attach(e,"mouseover",function(){qq(t._element).addClass(t._options.hoverClass)}),this._disposeSupport.attach(e,"mouseout",function(){qq(t._element).removeClass(t._options.hoverClass)}),this._disposeSupport.attach(e,"focus",function(){qq(t._element).addClass(t._options.focusClass)}),this._disposeSupport.attach(e,"blur",function(){qq(t._element).removeClass(t._options.focusClass)}),window.attachEvent&&e.setAttribute("tabIndex","-1"),e}},qq.FineUploaderBasic=function(e){this._options={debug:!1,button:null,multiple:!0,maxConnections:3,disableCancelForFormUploads:!1,autoUpload:!0,request:{endpoint:"/server/upload",params:{},paramsInBody:!1,customHeaders:{},forceMultipart:!0,inputName:"qqfile",uuidName:"qquuid",totalFileSizeName:"qqtotalfilesize"},validation:{allowedExtensions:[],sizeLimit:0,minSizeLimit:0,stopOnFirstInvalidFile:!0},callbacks:{onSubmit:function(){},onComplete:function(){},onCancel:function(){},onUpload:function(){},onUploadChunk:function(){},onResume:function(){},onProgress:function(){},onError:function(){},onAutoRetry:function(){},onManualRetry:function(){},onValidateBatch:function(){},onValidate:function(){}},messages:{typeError:"{file} has an invalid extension. Valid extension(s): {extensions}.",sizeError:"{file} is too large, maximum file size is {sizeLimit}.",minSizeError:"{file} is too small, minimum file size is {minSizeLimit}.",emptyError:"{file} is empty, please select files again without it.",noFilesError:"No files to upload.",onLeave:"The files are being uploaded, if you leave now the upload will be cancelled."},retry:{enableAuto:!1,maxAutoAttempts:3,autoAttemptDelay:5,preventRetryResponseProperty:"preventRetry"},classes:{buttonHover:"qq-upload-button-hover",buttonFocus:"qq-upload-button-focus"},chunking:{enabled:!1,partSize:2e6,paramNames:{partIndex:"qqpartindex",partByteOffset:"qqpartbyteoffset",chunkSize:"qqchunksize",totalFileSize:"qqtotalfilesize",totalParts:"qqtotalparts",filename:"qqfilename"}},resume:{enabled:!1,id:null,cookiesExpireIn:7,paramNames:{resuming:"qqresume"}},formatFileName:function(e){return 33<e.length&&(e=e.slice(0,19)+"..."+e.slice(-14)),e},text:{sizeSymbols:"kB MB GB TB PB EB".split(" ")}},qq.extend(this._options,e,!0),this._wrapCallbacks(),this._disposeSupport=new qq.DisposeSupport,this._filesInProgress=[],this._storedFileIds=[],this._autoRetries=[],this._retryTimeouts=[],this._preventRetries=[],this._paramsStore=this._createParamsStore(),this._endpointStore=this._createEndpointStore(),this._handler=this._createUploadHandler(),this._options.button&&(this._button=this._createUploadButton(this._options.button)),this._preventLeaveInProgress()},qq.FineUploaderBasic.prototype={log:function(e,t){!this._options.debug||t&&"info"!==t?t&&"info"!==t&&qq.log("[FineUploader] "+e,t):qq.log("[FineUploader] "+e)},setParams:function(e,t){null==t?this._options.request.params=e:this._paramsStore.setParams(e,t)},setEndpoint:function(e,t){null==t?this._options.request.endpoint=e:this._endpointStore.setEndpoint(e,t)},getInProgress:function(){return this._filesInProgress.length},uploadStoredFiles:function(){for(var e;this._storedFileIds.length;)e=this._storedFileIds.shift(),this._filesInProgress.push(e),this._handler.upload(e)},clearStoredFiles:function(){this._storedFileIds=[]},retry:function(e){return this._onBeforeManualRetry(e)?(this._handler.retry(e),!0):!1},cancel:function(e){this._handler.cancel(e)},reset:function(){this.log("Resetting uploader..."),this._handler.reset(),this._filesInProgress=[],this._storedFileIds=[],this._autoRetries=[],this._retryTimeouts=[],this._preventRetries=[],this._button.reset(),this._paramsStore.reset(),this._endpointStore.reset()},addFiles:function(e){var t,n,o=[];if(e){for(window.FileList&&e instanceof FileList||(e=[].concat(e)),t=0;t<e.length;t+=1)n=e[t],qq.isFileOrInput(n)?o.push(n):this.log(n+" is not a File or INPUT element!  Ignoring!","warn");this.log("Processing "+o.length+" files or inputs..."),this._uploadFileList(o)}},getUuid:function(e){return this._handler.getUuid(e)},getResumableFilesData:function(){return this._handler.getResumableFilesData()},getSize:function(e){return this._handler.getSize(e)},getFile:function(e){return this._handler.getFile(e)},_createUploadButton:function(e){var t=this,n=new qq.UploadButton({element:e,multiple:this._options.multiple&&qq.isXhrUploadSupported(),acceptFiles:this._options.validation.acceptFiles,onChange:function(e){t._onInputChange(e)},hoverClass:this._options.classes.buttonHover,focusClass:this._options.classes.buttonFocus});return this._disposeSupport.addDisposer(function(){n.dispose()}),n},_createUploadHandler:function(){var e=this;return new qq.UploadHandler({debug:this._options.debug,forceMultipart:this._options.request.forceMultipart,maxConnections:this._options.maxConnections,customHeaders:this._options.request.customHeaders,inputName:this._options.request.inputName,uuidParamName:this._options.request.uuidName,totalFileSizeParamName:this._options.request.totalFileSizeName,demoMode:this._options.demoMode,paramsInBody:this._options.request.paramsInBody,paramsStore:this._paramsStore,endpointStore:this._endpointStore,chunking:this._options.chunking,resume:this._options.resume,log:function(t,n){e.log(t,n)},onProgress:function(t,n,o,i){e._onProgress(t,n,o,i),e._options.callbacks.onProgress(t,n,o,i)},onComplete:function(t,n,o,i){e._onComplete(t,n,o,i),e._options.callbacks.onComplete(t,n,o)},onCancel:function(t,n){e._onCancel(t,n),e._options.callbacks.onCancel(t,n)},onUpload:function(t,n){e._onUpload(t,n),e._options.callbacks.onUpload(t,n)},onUploadChunk:function(t,n,o){e._options.callbacks.onUploadChunk(t,n,o)},onResume:function(t,n,o){return e._options.callbacks.onResume(t,n,o)},onAutoRetry:function(t,n,o,i){return e._preventRetries[t]=o[e._options.retry.preventRetryResponseProperty],e._shouldAutoRetry(t,n,o)?(e._maybeParseAndSendUploadError(t,n,o,i),e._options.callbacks.onAutoRetry(t,n,e._autoRetries[t]+1),e._onBeforeAutoRetry(t,n),e._retryTimeouts[t]=setTimeout(function(){e._onAutoRetry(t,n,o)},1e3*e._options.retry.autoAttemptDelay),!0):!1}})},_preventLeaveInProgress:function(){var e=this;this._disposeSupport.attach(window,"beforeunload",function(t){return e._filesInProgress.length?(t=t||window.event,t.returnValue=e._options.messages.onLeave):void 0})},_onSubmit:function(e){this._options.autoUpload&&this._filesInProgress.push(e)},_onProgress:function(){},_onComplete:function(e,t,n,o){this._removeFromFilesInProgress(e),this._maybeParseAndSendUploadError(e,t,n,o)},_onCancel:function(e){this._removeFromFilesInProgress(e),clearTimeout(this._retryTimeouts[e]),e=qq.indexOf(this._storedFileIds,e),!this._options.autoUpload&&e>=0&&this._storedFileIds.splice(e,1)},_removeFromFilesInProgress:function(e){e=qq.indexOf(this._filesInProgress,e),e>=0&&this._filesInProgress.splice(e,1)},_onUpload:function(){},_onInputChange:function(e){this.addFiles(qq.isXhrUploadSupported()?e.files:e),this._button.reset()},_onBeforeAutoRetry:function(e,t){this.log("Waiting "+this._options.retry.autoAttemptDelay+" seconds before retrying "+t+"...")},_onAutoRetry:function(e,t){this.log("Retrying "+t+"..."),this._autoRetries[e]++,this._handler.retry(e)},_shouldAutoRetry:function(e){return!this._preventRetries[e]&&this._options.retry.enableAuto?(void 0===this._autoRetries[e]&&(this._autoRetries[e]=0),this._autoRetries[e]<this._options.retry.maxAutoAttempts):!1},_onBeforeManualRetry:function(e){if(this._preventRetries[e])return this.log("Retries are forbidden for id "+e,"warn"),!1;if(this._handler.isValid(e)){var t=this._handler.getName(e);return!1===this._options.callbacks.onManualRetry(e,t)?!1:(this.log("Retrying upload for '"+t+"' (id: "+e+")..."),this._filesInProgress.push(e),!0)}return this.log("'"+e+"' is not a valid file ID","error"),!1},_maybeParseAndSendUploadError:function(e,t,n,o){n.success||(o&&200!==o.status&&!n.error?this._options.callbacks.onError(e,t,"XHR returned response code "+o.status):this._options.callbacks.onError(e,t,n.error?n.error:"Upload failure reason unknown"))},_uploadFileList:function(e){var t;if(!1!==this._options.callbacks.onValidateBatch(this._getValidationDescriptors(e)))if(0<e.length){for(t=0;t<e.length;t++)if(this._validateFile(e[t]))this._uploadFile(e[t]);else if(this._options.validation.stopOnFirstInvalidFile)break}else this._error("noFilesError","")},_uploadFile:function(e){var e=this._handler.add(e),t=this._handler.getName(e);!1!==this._options.callbacks.onSubmit(e,t)&&(this._onSubmit(e,t),this._options.autoUpload?this._handler.upload(e):this._storeFileForLater(e))},_storeFileForLater:function(e){this._storedFileIds.push(e)},_validateFile:function(e){var t,n,e=this._getValidationDescriptor(e);return t=e.name,n=e.size,!1===this._options.callbacks.onValidate(e)?!1:this._isAllowedExtension(t)?0===n?(this._error("emptyError",t),!1):n&&this._options.validation.sizeLimit&&n>this._options.validation.sizeLimit?(this._error("sizeError",t),!1):n&&n<this._options.validation.minSizeLimit?(this._error("minSizeError",t),!1):!0:(this._error("typeError",t),!1)},_error:function(e,t){var n=this._options.messages[e],o=this._options.validation.allowedExtensions.join(", ").toLowerCase(),i=this._options.formatFileName(t),n=n.replace("{file}",i),n=n.replace("{extensions}",o),o=this._formatSize(this._options.validation.sizeLimit),n=n.replace("{sizeLimit}",o),o=this._formatSize(this._options.validation.minSizeLimit),n=n.replace("{minSizeLimit}",o);return this._options.callbacks.onError(null,t,n),n},_isAllowedExtension:function(e){var t=this._options.validation.allowedExtensions,n=!1;return t.length?(qq.each(t,function(t,o){return null!=e.match(RegExp("\\."+o+"$","i"))?(n=!0,!1):void 0}),n):!0},_formatSize:function(e){var t=-1;do e/=1024,t++;while(e>99);return Math.max(e,.1).toFixed(1)+this._options.text.sizeSymbols[t]},_wrapCallbacks:function(){var e,t;e=this,t=function(t,n,o){try{return n.apply(e,o)}catch(i){e.log("Caught exception in '"+t+"' callback - "+i.message,"error")}};for(var n in this._options.callbacks)(function(){var o,i;o=n,i=e._options.callbacks[o],e._options.callbacks[o]=function(){return t(o,i,arguments)}})()},_parseFileName:function(e){return e.value?e.value.replace(/.*(\/|\\)/,""):null!==e.fileName&&void 0!==e.fileName?e.fileName:e.name},_parseFileSize:function(e){var t;return e.value||(t=null!==e.fileSize&&void 0!==e.fileSize?e.fileSize:e.size),t},_getValidationDescriptor:function(e){var t,n;return n={},t=this._parseFileName(e),e=this._parseFileSize(e),n.name=t,e&&(n.size=e),n},_getValidationDescriptors:function(e){var t=this,n=[];return qq.each(e,function(e,o){n.push(t._getValidationDescriptor(o))}),n},_createParamsStore:function(){var e={},t=this;return{setParams:function(t,n){var o={};qq.extend(o,t),e[n]=o},getParams:function(n){var o={};return null!=n&&e[n]?qq.extend(o,e[n]):qq.extend(o,t._options.request.params),o},remove:function(t){return delete e[t]},reset:function(){e={}}}},_createEndpointStore:function(){var e={},t=this;return{setEndpoint:function(t,n){e[n]=t},getEndpoint:function(n){return null!=n&&e[n]?e[n]:t._options.request.endpoint},remove:function(t){return delete e[t]},reset:function(){e={}}}}},qq.DragAndDrop=function(e){function t(){p===d&&!l&&(r.callbacks.log("Grabbed "+u.length+" files after tree traversal."),a.dropDisabled(!1),r.callbacks.dropProcessing(!1,u))}function n(e){var o;p+=1,e.isFile?e.file(function(e){u.push(e),d+=1,t()}):e.isDirectory&&(l=!0,e=e.createReader(),e.readEntries(function(e){for(d+=1,o=0;o<e.length;o+=1)n(e[o]);l=!1,e.length||t()}))}function o(e){a=new qq.UploadDropZone({element:e,onEnter:function(t){qq(e).addClass(r.classes.dropActive),t.stopPropagation()},onLeaveNotDescendants:function(){qq(e).removeClass(r.classes.dropActive)},onDrop:function(o){r.hideDropzones&&qq(e).hide(),qq(e).removeClass(r.classes.dropActive);var i,s,o=o.dataTransfer;if(r.callbacks.dropProcessing(!0),a.dropDisabled(!0),1<o.files.length&&!r.multiple)r.callbacks.dropProcessing(!1),r.callbacks.error("tooManyFilesError",""),a.dropDisabled(!1);else if(u=[],d=p=0,qq.isFolderDropSupported(o))for(i=o.items,o=0;o<i.length;o+=1)(s=i[o].webkitGetAsEntry())&&(s.isFile?(u.push(i[o].getAsFile()),o===i.length-1&&t()):n(s));else r.callbacks.dropProcessing(!1,o.files),a.dropDisabled(!1)}}),c.addDisposer(function(){a.dispose()}),r.hideDropzones&&qq(e).hide()}function i(e){var t;return qq.each(e.dataTransfer.types,function(e,n){return"Files"===n?(t=!0,!1):void 0}),t}function s(){r.dropArea&&r.extraDropzones.push(r.dropArea);var e,t=r.extraDropzones;for(e=0;e<t.length;e+=1)o(t[e]);r.dropArea&&(!qq.ie()||qq.ie10())&&c.attach(document,"dragenter",function(n){if(!a.dropDisabled()&&i(n)&&!qq(r.dropArea).hasClass(r.classes.dropDisabled))for(r.dropArea.style.display="block",e=0;e<t.length;e+=1)t[e].style.display="block"}),c.attach(document,"dragleave",function(n){if(r.hideDropzones&&qq.FineUploader.prototype._leaving_document_out(n))for(e=0;e<t.length;e+=1)qq(t[e]).hide()}),c.attach(document,"drop",function(n){if(r.hideDropzones)for(e=0;e<t.length;e+=1)qq(t[e]).hide();n.preventDefault()})}var r,a,l,u=[],p=0,d=0,c=new qq.DisposeSupport;return r={dropArea:null,extraDropzones:[],hideDropzones:!0,multiple:!0,classes:{dropActive:null},callbacks:{dropProcessing:function(){},error:function(){},log:function(){}}},qq.extend(r,e),{setup:function(){s()},setupExtraDropzone:function(e){r.extraDropzones.push(e),o(e)},removeExtraDropzone:function(e){var t,n=r.extraDropzones;for(t in n)if(n[t]===e)return n.splice(t,1)},dispose:function(){c.dispose(),a.dispose()}}},qq.UploadDropZone=function(e){function t(){return qq.safari()||qq.firefox()&&qq.windows()}function n(e){if(qq.ie()&&!qq.ie10())return!1;var t=e.dataTransfer,n=qq.safari(),e=qq.ie10()?!0:"none"!==t.effectAllowed;return t&&e&&(t.files||!n&&t.types.contains&&t.types.contains("Files"))}function o(e){return void 0!==e&&(r=e),r}var i,s,r,a,l=new qq.DisposeSupport;return i={element:null,onEnter:function(){},onLeave:function(){},onLeaveNotDescendants:function(){},onDrop:function(){}},qq.extend(i,e),s=i.element,function(){a||(t?l.attach(document,"dragover",function(e){e.preventDefault()}):l.attach(document,"dragover",function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="none",e.preventDefault())}),a=!0)}(),function(){l.attach(s,"dragover",function(e){if(n(e)){var t=qq.ie()?null:e.dataTransfer.effectAllowed;e.dataTransfer.dropEffect="move"===t||"linkMove"===t?"move":"copy",e.stopPropagation(),e.preventDefault()}}),l.attach(s,"dragenter",function(e){!o()&&n(e)&&i.onEnter(e)}),l.attach(s,"dragleave",function(e){if(n(e)){i.onLeave(e);var t=document.elementFromPoint(e.clientX,e.clientY);qq(this).contains(t)||i.onLeaveNotDescendants(e)}}),l.attach(s,"drop",function(e){!o()&&n(e)&&(e.preventDefault(),i.onDrop(e))})}(),{dropDisabled:function(e){return o(e)},dispose:function(){l.dispose()}}},qq.FineUploader=function(e){qq.FineUploaderBasic.apply(this,arguments),qq.extend(this._options,{element:null,listElement:null,dragAndDrop:{extraDropzones:[],hideDropzones:!0,disableDefaultDropzone:!1},text:{uploadButton:"Upload a file",cancelButton:"Cancel",retryButton:"Retry",failUpload:"Upload failed",dragZone:"Drop files here to upload",dropProcessing:"Processing dropped files...",formatProgress:"{percent}% of {total_size}",waitingForResponse:"Processing..."},template:'<div class="qq-uploader">'+(this._options.dragAndDrop&&this._options.dragAndDrop.disableDefaultDropzone?"":'<div class="qq-upload-drop-area"><span>{dragZoneText}</span></div>')+(this._options.button?"":'<div class="qq-upload-button"><div>{uploadButtonText}</div></div>')+'<span class="qq-drop-processing"><span>{dropProcessingText}</span><span class="qq-drop-processing-spinner"></span></span>'+(this._options.listElement?"":'<ul class="qq-upload-list"></ul>')+"</div>",fileTemplate:'<li><div class="qq-progress-bar"></div><span class="qq-upload-spinner"></span><span class="qq-upload-finished"></span><span class="qq-upload-file"></span><span class="qq-upload-size"></span><a class="qq-upload-cancel" href="#">{cancelButtonText}</a><a class="qq-upload-retry" href="#">{retryButtonText}</a><span class="qq-upload-status-text">{statusText}</span></li>',classes:{button:"qq-upload-button",drop:"qq-upload-drop-area",dropActive:"qq-upload-drop-area-active",dropDisabled:"qq-upload-drop-area-disabled",list:"qq-upload-list",progressBar:"qq-progress-bar",file:"qq-upload-file",spinner:"qq-upload-spinner",finished:"qq-upload-finished",retrying:"qq-upload-retrying",retryable:"qq-upload-retryable",size:"qq-upload-size",cancel:"qq-upload-cancel",retry:"qq-upload-retry",statusText:"qq-upload-status-text",success:"qq-upload-success",fail:"qq-upload-fail",successIcon:null,failIcon:null,dropProcessing:"qq-drop-processing",dropProcessingSpinner:"qq-drop-processing-spinner"},failedUploadTextDisplay:{mode:"default",maxChars:50,responseProperty:"error",enableTooltip:!0},messages:{tooManyFilesError:"You may only drop one file"},retry:{showAutoRetryNote:!0,autoRetryNote:"Retrying {retryNum}/{maxAuto}...",showButton:!1},showMessage:function(e){setTimeout(function(){alert(e)},0)}},!0),qq.extend(this._options,e,!0),this._wrapCallbacks(),this._options.template=this._options.template.replace(/\{dragZoneText\}/g,this._options.text.dragZone),this._options.template=this._options.template.replace(/\{uploadButtonText\}/g,this._options.text.uploadButton),this._options.template=this._options.template.replace(/\{dropProcessingText\}/g,this._options.text.dropProcessing),this._options.fileTemplate=this._options.fileTemplate.replace(/\{cancelButtonText\}/g,this._options.text.cancelButton),this._options.fileTemplate=this._options.fileTemplate.replace(/\{retryButtonText\}/g,this._options.text.retryButton),this._options.fileTemplate=this._options.fileTemplate.replace(/\{statusText\}/g,""),this._element=this._options.element,this._element.innerHTML=this._options.template,this._listElement=this._options.listElement||this._find(this._element,"list"),this._classes=this._options.classes,this._button||(this._button=this._createUploadButton(this._find(this._element,"button"))),this._bindCancelAndRetryEvents(),this._dnd=this._setupDragAndDrop()},qq.extend(qq.FineUploader.prototype,qq.FineUploaderBasic.prototype),qq.extend(qq.FineUploader.prototype,{clearStoredFiles:function(){qq.FineUploaderBasic.prototype.clearStoredFiles.apply(this,arguments),this._listElement.innerHTML=""},addExtraDropzone:function(e){this._dnd.setupExtraDropzone(e)},removeExtraDropzone:function(e){return this._dnd.removeExtraDropzone(e)},getItemByFileId:function(e){for(var t=this._listElement.firstChild;t;){if(t.qqFileId==e)return t;t=t.nextSibling}},cancel:function(e){qq.FineUploaderBasic.prototype.cancel.apply(this,arguments);var t=this.getItemByFileId(e);qq(t).remove()},reset:function(){qq.FineUploaderBasic.prototype.reset.apply(this,arguments),this._element.innerHTML=this._options.template,this._listElement=this._options.listElement||this._find(this._element,"list"),this._options.button||(this._button=this._createUploadButton(this._find(this._element,"button"))),this._bindCancelAndRetryEvents(),this._dnd.dispose(),this._dnd=this._setupDragAndDrop()},_setupDragAndDrop:function(){var e,t,n=this,o=this._find(this._element,"dropProcessing");return t=function(e){e.preventDefault()},this._options.dragAndDrop.disableDefaultDropzone||(e=this._find(this._options.element,"drop")),e=new qq.DragAndDrop({dropArea:e,extraDropzones:this._options.dragAndDrop.extraDropzones,hideDropzones:this._options.dragAndDrop.hideDropzones,multiple:this._options.multiple,classes:{dropActive:this._options.classes.dropActive},callbacks:{dropProcessing:function(e,i){var s=n._button.getInput();e?(qq(o).css({display:"block"}),qq(s).attach("click",t)):(qq(o).hide(),qq(s).detach("click",t)),i&&n.addFiles(i)},error:function(e,t){n._error(e,t)},log:function(e,t){n.log(e,t)}}}),e.setup(),e},_leaving_document_out:function(e){return(qq.chrome()||qq.safari()&&qq.windows())&&0==e.clientX&&0==e.clientY||qq.firefox()&&!e.relatedTarget},_storeFileForLater:function(e){qq.FineUploaderBasic.prototype._storeFileForLater.apply(this,arguments);var t=this.getItemByFileId(e);qq(this._find(t,"spinner")).hide()},_find:function(e,t){var n=qq(e).getByClass(this._options.classes[t])[0];if(!n)throw Error("element not found "+t);return n},_onSubmit:function(e,t){qq.FineUploaderBasic.prototype._onSubmit.apply(this,arguments),this._addToList(e,t)},_onProgress:function(e,t,n,o){qq.FineUploaderBasic.prototype._onProgress.apply(this,arguments);var i,s,r,a;i=this.getItemByFileId(e),s=this._find(i,"progressBar"),a=Math.round(100*(n/o)),n===o?(r=this._find(i,"cancel"),qq(r).hide(),qq(s).hide(),qq(this._find(i,"statusText")).setText(this._options.text.waitingForResponse),r=this._formatSize(o)):(r=this._formatProgress(n,o),qq(s).css({display:"block"})),qq(s).css({width:a+"%"}),i=this._find(i,"size"),qq(i).css({display:"inline"}),qq(i).setText(r)},_onComplete:function(e,t,n){qq.FineUploaderBasic.prototype._onComplete.apply(this,arguments);var o=this.getItemByFileId(e);qq(this._find(o,"statusText")).clearText(),qq(o).removeClass(this._classes.retrying),qq(this._find(o,"progressBar")).hide(),(!this._options.disableCancelForFormUploads||qq.isXhrUploadSupported())&&qq(this._find(o,"cancel")).hide(),qq(this._find(o,"spinner")).hide(),n.success?(qq(o).addClass(this._classes.success),this._classes.successIcon&&(this._find(o,"finished").style.display="inline-block",qq(o).addClass(this._classes.successIcon))):(qq(o).addClass(this._classes.fail),this._classes.failIcon&&(this._find(o,"finished").style.display="inline-block",qq(o).addClass(this._classes.failIcon)),this._options.retry.showButton&&!this._preventRetries[e]&&qq(o).addClass(this._classes.retryable),this._controlFailureTextDisplay(o,n))},_onUpload:function(e){qq.FineUploaderBasic.prototype._onUpload.apply(this,arguments),this._showSpinner(this.getItemByFileId(e))},_onBeforeAutoRetry:function(e){var t,n,o,i,s;qq.FineUploaderBasic.prototype._onBeforeAutoRetry.apply(this,arguments),t=this.getItemByFileId(e),n=this._find(t,"progressBar"),this._showCancelLink(t),n.style.width=0,qq(n).hide(),this._options.retry.showAutoRetryNote&&(n=this._find(t,"statusText"),o=this._autoRetries[e]+1,i=this._options.retry.maxAutoAttempts,s=this._options.retry.autoRetryNote.replace(/\{retryNum\}/g,o),s=s.replace(/\{maxAuto\}/g,i),qq(n).setText(s),1===o&&qq(t).addClass(this._classes.retrying))},_onBeforeManualRetry:function(e){if(qq.FineUploaderBasic.prototype._onBeforeManualRetry.apply(this,arguments)){var t=this.getItemByFileId(e);return this._find(t,"progressBar").style.width=0,qq(t).removeClass(this._classes.fail),qq(this._find(t,"statusText")).clearText(),this._showSpinner(t),this._showCancelLink(t),!0}return!1},_addToList:function(e,t){var n=qq.toElement(this._options.fileTemplate);if(this._options.disableCancelForFormUploads&&!qq.isXhrUploadSupported()){var o=this._find(n,"cancel");qq(o).remove()}n.qqFileId=e,o=this._find(n,"file"),qq(o).setText(this._options.formatFileName(t)),qq(this._find(n,"size")).hide(),this._options.multiple||this._clearList(),this._listElement.appendChild(n)},_clearList:function(){this._listElement.innerHTML="",this.clearStoredFiles()},_bindCancelAndRetryEvents:function(){var e=this;this._disposeSupport.attach(this._listElement,"click",function(t){var t=t||window.event,n=t.target||t.srcElement;if(qq(n).hasClass(e._classes.cancel)||qq(n).hasClass(e._classes.retry)){for(qq.preventDefault(t),t=n.parentNode;void 0==t.qqFileId;)t=n=n.parentNode;qq(n).hasClass(e._classes.cancel)?e.cancel(t.qqFileId):(qq(t).removeClass(e._classes.retryable),e.retry(t.qqFileId))}})},_formatProgress:function(e,t){var n=this._options.text.formatProgress,o=Math.round(100*(e/t)),n=n.replace("{percent}",o),o=this._formatSize(t);return n=n.replace("{total_size}",o)},_controlFailureTextDisplay:function(e,t){var n,o,i,s;n=this._options.failedUploadTextDisplay.mode,o=this._options.failedUploadTextDisplay.maxChars,i=this._options.failedUploadTextDisplay.responseProperty,"custom"===n?((n=t[i])?n.length>o&&(s=n.substring(0,o)+"..."):(n=this._options.text.failUpload,this.log("'"+i+"' is not a valid property on the server response.","warn")),qq(this._find(e,"statusText")).setText(s||n),this._options.failedUploadTextDisplay.enableTooltip&&this._showTooltip(e,n)):"default"===n?qq(this._find(e,"statusText")).setText(this._options.text.failUpload):"none"!==n&&this.log("failedUploadTextDisplay.mode value of '"+n+"' is not valid","warn")},_showTooltip:function(e,t){e.title=t},_showSpinner:function(e){this._find(e,"spinner").style.display="inline-block"},_showCancelLink:function(e){(!this._options.disableCancelForFormUploads||qq.isXhrUploadSupported())&&(this._find(e,"cancel").style.display="inline")
},_error:function(){this._options.showMessage(qq.FineUploaderBasic.prototype._error.apply(this,arguments))}}),qq.UploadHandler=function(e){var t,n,o,i,s=[];return t={debug:!1,forceMultipart:!0,paramsInBody:!1,paramsStore:{},endpointStore:{},maxConnections:3,uuidParamName:"qquuid",totalFileSizeParamName:"qqtotalfilesize",chunking:{enabled:!1,partSize:2e6,paramNames:{partIndex:"qqpartindex",partByteOffset:"qqpartbyteoffset",chunkSize:"qqchunksize",totalParts:"qqtotalparts",filename:"qqfilename"}},resume:{enabled:!1,id:null,cookiesExpireIn:7,paramNames:{resuming:"qqresume"}},log:function(){},onProgress:function(){},onComplete:function(){},onCancel:function(){},onUpload:function(){},onUploadChunk:function(){},onAutoRetry:function(){},onResume:function(){}},qq.extend(t,e),n=t.log,o=function(e){var e=qq.indexOf(s,e),n=t.maxConnections;s.splice(e,1),s.length>=n&&n>e&&(e=s[n-1],i.upload(e))},i=qq.isXhrUploadSupported()?new qq.UploadHandlerXhr(t,o,n):new qq.UploadHandlerForm(t,o,n),{add:function(e){return i.add(e)},upload:function(e){return s.push(e)<=t.maxConnections?i.upload(e):void 0},retry:function(e){return 0<=qq.indexOf(s,e)?i.upload(e,!0):this.upload(e)},cancel:function(e){n("Cancelling "+e),t.paramsStore.remove(e),i.cancel(e),o(e)},cancelAll:function(){qq.each(s,function(e,t){this.cancel(t)}),s=[]},getName:function(e){return i.getName(e)},getSize:function(e){return i.getSize?i.getSize(e):void 0},getFile:function(e){return i.getFile?i.getFile(e):void 0},getQueue:function(){return s},reset:function(){n("Resetting upload handler"),s=[],i.reset()},getUuid:function(e){return i.getUuid(e)},isValid:function(e){return i.isValid(e)},getResumableFilesData:function(){return i.getResumableFilesData?i.getResumableFilesData():[]}}},qq.UploadHandlerForm=function(a,b,c){function d(e,t){p[e.id]=qq(e).attach("load",function(){if(l("Received response for "+e.id),e.parentNode){try{if(e.contentDocument&&e.contentDocument.body&&"false"==e.contentDocument.body.innerHTML)return}catch(n){l("Error when attempting to access iframe during handling of upload response ("+n+")","error")}t()}})}function e(a){var b;try{var c=a.contentDocument||a.contentWindow.document,d=c.body.innerHTML;l("converting iframe's innerHTML to JSON"),l("innerHTML = "+d),d&&d.match(/^<pre/i)&&(d=c.body.firstChild.firstChild.nodeValue),b=eval("("+d+")")}catch(e){l("Error when attempting to parse form upload response ("+e+")","error"),b={success:!1}}return b}function f(e){var t=qq.toElement('<iframe src="javascript:false;" name="'+e+'" />');return t.setAttribute("id",e),t.style.display="none",document.body.appendChild(t),t}function g(e,t){var n=h.paramsStore.getParams(e),o=qq.toElement('<form method="'+(h.demoMode?"GET":"POST")+'" enctype="multipart/form-data"></form>'),i=h.endpointStore.getEndpoint(e),s=i;return n[h.uuidParamName]=m[e],h.paramsInBody?qq.obj2Inputs(n,o):s=qq.obj2url(n,i),o.setAttribute("action",s),o.setAttribute("target",t.name),o.style.display="none",document.body.appendChild(o),o}var h=a,k=[],m=[],p={},l=c,o;return o={add:function(e){e.setAttribute("name",h.inputName);var t=k.push(e)-1;return m[t]=qq.getUniqueId(),e.parentNode&&qq(e).remove(),t},getName:function(e){return k[e].value.replace(/.*(\/|\\)/,"")},isValid:function(e){return void 0!==k[e]},reset:function(){qq.UploadHandler.prototype.reset.apply(this,arguments),k=[],m=[],p={}},getUuid:function(e){return m[e]},cancel:function(e){h.onCancel(e,this.getName(e)),delete k[e],delete m[e],delete p[e],(e=document.getElementById(e))&&(e.setAttribute("src","java"+String.fromCharCode(115)+"cript:false;"),qq(e).remove())},upload:function(t){var n=k[t],i=o.getName(t),s=f(t),r=g(t,s);if(!n)throw Error("file with passed id was not added, or already uploaded or cancelled");return h.onUpload(t,this.getName(t)),r.appendChild(n),d(s,function(){l("iframe loaded");var n=e(s);setTimeout(function(){p[t](),delete p[t],qq(s).remove()},1),(n.success||!h.onAutoRetry(t,i,n))&&(h.onComplete(t,i,n),b(t))}),l("Sending upload request for "+t),r.submit(),qq(r).remove(),t}}},qq.UploadHandlerXhr=function(e,t,n){function o(e,t,n){var o=S.getSize(e),e=S.getName(e);t[g.chunking.paramNames.partIndex]=n.part,t[g.chunking.paramNames.partByteOffset]=n.start,t[g.chunking.paramNames.chunkSize]=n.end-n.start,t[g.chunking.paramNames.totalParts]=n.count,t[g.totalFileSizeParamName]=o,k&&(t[g.chunking.paramNames.filename]=e)}function i(e,t){var n,o=g.chunking.partSize,i=S.getSize(e),r=b[e].file,a=o*t,o=a+o>=i?i:a+o,i=s(e);return r.slice?n=r.slice(a,o):r.mozSlice?n=r.mozSlice(a,o):r.webkitSlice&&(n=r.webkitSlice(a,o)),{part:t,start:a,end:o,count:i,blob:n}}function s(e){return e=S.getSize(e),Math.ceil(e/g.chunking.partSize)}function r(e){return b[e].xhr=new XMLHttpRequest,b[e].xhr}function a(e,t,n,o){var i=new FormData,s=g.demoMode?"GET":"POST",r=g.endpointStore.getEndpoint(o),a=r,l=S.getName(o),u=S.getSize(o);return e[g.uuidParamName]=b[o].uuid,k&&(e[g.totalFileSizeParamName]=u),g.paramsInBody||(e[g.inputName]=l,a=qq.obj2url(e,r)),t.open(s,a,!0),k?(g.paramsInBody&&qq.obj2FormData(e,i),i.append(g.inputName,n),i):n}function l(e,t){var n=g.customHeaders;S.getName(e);var o=b[e].file;t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.setRequestHeader("Cache-Control","no-cache"),k||(t.setRequestHeader("Content-Type","application/octet-stream"),t.setRequestHeader("X-Mime-Type",o.type)),qq.each(n,function(e,n){t.setRequestHeader(e,n)})}function u(e,t,n){var o=S.getName(e),i=S.getSize(e);b[e].attemptingResume=!1,g.onProgress(e,o,i,i),g.onComplete(e,o,t,n),delete b[e].xhr,v(e)}function p(e){var t,n=i(e,b[e].remainingChunkIdxs[0]),s=r(e),u=S.getSize(e),p=S.getName(e);void 0===b[e].loaded&&(b[e].loaded=0),f(e,n),s.onreadystatechange=c(e,s),s.upload.onprogress=function(t){t.lengthComputable&&b[e].loaded<u&&g.onProgress(e,p,t.loaded+b[e].loaded,u)},g.onUploadChunk(e,p,d(n)),t=g.paramsStore.getParams(e),o(e,t,n),b[e].attemptingResume&&(t[g.resume.paramNames.resuming]=!0),t=a(t,s,n.blob,e),l(e,s),y("Sending chunked upload request for "+e+": bytes "+(n.start+1)+"-"+n.end+" of "+u),s.send(t)}function d(e){return{partIndex:e.part,startByte:e.start+1,endByte:e.end,totalParts:e.count}}function c(e,t){return function(){if(4===t.readyState){var n;if(b[e]){y("xhr - server response received for "+e),y("responseText = "+t.responseText);try{n=qq.parseJson(t.responseText)}catch(o){y("Error when attempting to parse xhr response text ("+o+")","error"),n={}}if(200!==t.status||!n.success||n.reset)if(n.reset&&(y("Server has ordered chunking effort to be restarted on next attempt for file ID "+e,"error"),C&&h(e),b[e].remainingChunkIdxs=[],delete b[e].loaded),b[e].attemptingResume&&n.reset)b[e].attemptingResume=!1,y("Server has declared that it cannot handle resume for file ID "+e+" - starting from the first chunk","error"),S.upload(e,!0);else{var s=S.getName(e);g.onAutoRetry(e,s,n,t)||u(e,n,t)}else F?(s=b[e].remainingChunkIdxs.shift(),s=i(e,s),b[e].attemptingResume=!1,b[e].loaded+=s.end-s.start,0<b[e].remainingChunkIdxs.length?p(e):(h(e),u(e,n,t))):u(e,n,t)}}}}function f(e,t){var n=S.getUuid(e),o=q(e);qq.setCookie(o,n+x+t.part,g.resume.cookiesExpireIn)}function h(e){e=q(e),qq.deleteCookie(e)}function q(e){var t=S.getName(e),e=S.getSize(e),n=g.chunking.partSize,t="qqfilechunk"+x+encodeURIComponent(t)+x+e+x+n;return void 0!==_&&(t+=x+_),t}function m(e){var t,n,o=b[e].file,i=S.getName(e);b[e].loaded=0,t=r(e),t.upload.onprogress=function(t){t.lengthComputable&&(b[e].loaded=t.loaded,g.onProgress(e,i,t.loaded,t.total))},t.onreadystatechange=c(e,t),n=g.paramsStore.getParams(e),o=a(n,t,o,e),l(e,t),y("Sending upload request for "+e),t.send(o)}var _,g=e,v=t,y=n,b=[],x="|",F=g.chunking.enabled&&qq.isFileChunkingSupported(),C=g.resume.enabled&&F&&qq.areCookiesEnabled();_=null===g.resume.id||void 0===g.resume.id||qq.isFunction(g.resume.id)||qq.isObject(g.resume.id)?void 0:g.resume.id;var S,k=g.forceMultipart||g.paramsInBody;return S={add:function(e){if(!(e instanceof File))throw Error("Passed obj in not a File (in qq.UploadHandlerXhr)");return e=b.push({file:e})-1,b[e].uuid=qq.getUniqueId(),e},getName:function(e){return e=b[e].file,null!==e.fileName&&void 0!==e.fileName?e.fileName:e.name},getSize:function(e){return e=b[e].file,null!=e.fileSize?e.fileSize:e.size},getFile:function(e){return b[e]?b[e].file:void 0},getLoaded:function(e){return b[e].loaded||0},isValid:function(e){return void 0!==b[e]},reset:function(){b=[]},getUuid:function(e){return b[e].uuid},upload:function(e,t){var n=this.getName(e);if(g.onUpload(e,n),F){var o,r,a=S.getName(e),n=0;if(!b[e].remainingChunkIdxs||0===b[e].remainingChunkIdxs.length){if(b[e].remainingChunkIdxs=[],C&&!t){r=qq.getCookie(q(e));var l;r?(l=r.indexOf(x),o=r.substr(0,l),r=parseInt(r.substr(l+1,r.length-l),10),o={uuid:o,part:r}):o=void 0,o&&(r=i(e,o.part),!1!==g.onResume(e,a,d(r))&&(n=o.part,b[e].uuid=o.uuid,b[e].loaded=r.start,b[e].attemptingResume=!0,y("Resuming "+a+" at partition index "+n)))}for(a=s(e)-1;a>=n;a-=1)b[e].remainingChunkIdxs.unshift(a)}p(e)}else m(e)},cancel:function(e){g.onCancel(e,this.getName(e)),b[e].xhr&&b[e].xhr.abort(),C&&h(e),delete b[e]},getResumableFilesData:function(){var e=[],t=[];return F&&C?(e=qq.getCookieNames(void 0===_?RegExp("^qqfilechunk\\"+x+".+\\"+x+"\\d+\\"+x+g.chunking.partSize+"="):RegExp("^qqfilechunk\\"+x+".+\\"+x+"\\d+\\"+x+g.chunking.partSize+"\\"+x+_+"=")),qq.each(e,function(e,n){var o=n.split(x),i=qq.getCookie(n).split(x);t.push({name:decodeURIComponent(o[1]),size:o[2],uuid:i[0],partIdx:i[1]})}),t):[]}}},function(e){var t,n,o,i,s,r,a,l,u,p;r=["uploaderType"],o=function(e){return e&&(e=l(e),a(e),t("basic"===s("uploaderType")?new qq.FineUploaderBasic(e):new qq.FineUploader(e))),n},i=function(e,t){var o=n.data("fineuploader");return t?(void 0===o&&(o={}),o[e]=t,n.data("fineuploader",o),void 0):void 0===o?null:o[e]},t=function(e){return i("uploader",e)},s=function(e,t){return i(e,t)},a=function(t){var o=t.callbacks={};e.each((new qq.FineUploaderBasic)._options.callbacks,function(e){var t,i;t=/^on(\w+)/.exec(e)[1],t=t.substring(0,1).toLowerCase()+t.substring(1),i=n,o[e]=function(){var e=Array.prototype.slice.call(arguments);return i.triggerHandler(t,e)}})},l=function(t,o){var i,a;return i=void 0===o?"basic"!==t.uploaderType?{element:n[0]}:{}:o,e.each(t,function(t,n){0<=e.inArray(t,r)?s(t,n):n instanceof e?i[t]=n[0]:e.isPlainObject(n)?(i[t]={},l(n,i[t])):e.isArray(n)?(a=[],e.each(n,function(t,n){n instanceof e?e.merge(a,n):a.push(n)}),i[t]=a):i[t]=n}),void 0===o?i:void 0},u=function(n){return"string"===e.type(n)&&!n.match(/^_/)&&void 0!==t()[n]},p=function(e){var n=[],o=Array.prototype.slice.call(arguments,1);return l(o,n),t()[e].apply(t(),n)},e.fn.fineUploader=function(i){var s=this,r=arguments,a=[];return this.each(function(l,d){if(n=e(d),t()&&u(i)){if(a.push(p.apply(s,r)),1===s.length)return!1}else"object"!=typeof i&&i?e.error("Method "+i+" does not exist on jQuery.fineUploader"):o.apply(s,r)}),1===a.length?a[0]:1<a.length?a:this}}(jQuery);